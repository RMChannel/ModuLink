<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="alerts" class="floating-alert-container">
    <!-- Error Alert -->
    <div th:if="${error != null}" class="floating-alert alert-danger" role="alert">
        <div class="floating-alert-icon">
            <i class="bi bi-exclamation-circle-fill"></i>
        </div>
        <div class="floating-alert-content">
            <span class="text-break" th:text="${message != null} ? ${message} : 'Si Ã¨ verificato un errore durante l\'operazione.'">Errore generico</span>
        </div>
        <button type="button" class="floating-alert-close" onclick="this.parentElement.remove()" aria-label="Close">
            <i class="bi bi-x"></i>
        </button>
    </div>

    <!-- Success Alert -->
    <div th:if="${success != null}" class="floating-alert alert-success" role="alert">
        <div class="floating-alert-icon">
            <i class="bi bi-check-circle-fill"></i>
        </div>
        <div class="floating-alert-content">
            <span class="text-break" th:text="${message != null} ? ${message} : 'Operazione completata con successo.'">Successo</span>
        </div>
        <button type="button" class="floating-alert-close" onclick="this.parentElement.remove()" aria-label="Close">
            <i class="bi bi-x"></i>
        </button>
    </div>

    <script th:if="${error != null or success != null}">
        setTimeout(() => {
            const container = document.querySelector('.floating-alert-container');
            if (container) {
                const alerts = container.querySelectorAll('.floating-alert');
                alerts.forEach(alert => {
                    alert.classList.add('fading-out');
                    setTimeout(() => alert.remove(), 500);
                });
            }
        }, 3000);
    </script>
</div>

</body>
</html>
