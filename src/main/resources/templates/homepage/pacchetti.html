<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: mainHead(pageTitle='Affiliati', additionalCss=${ {'/css/affiliazioni.css'} })}">
</head>
<body>

<header th:replace="~{fragments/header :: mainHeader}"></header>

<div class="affiliazioni-container">
    <div class="page-header">
        <h1 class="page-title">I Nostri Affiliati</h1>
        <p class="page-subtitle">Scopri le Aziende che hanno scelto di usare ModuLink. Selezionale per scoprirle e confrontarle.</p>
    </div>

    <!-- Zona Filtri -->
    <div class="filters-wrapper">
        <!-- Select Settore -->
        <select id="sectorSelect" class="sector-select" onchange="applyFilters()">
            <option value="">Tutti i Settori</option>
            <option value="Informatica">Informatica & Servizi</option>
            <option value="Logistica">Logistica & Trasporti</option>
            <option value="Moda">Retail & Moda</option>
            <option value="Energia">Energia Rinnovabile</option>
            <option value="Agricoltura">Agricoltura & Bio</option>
            <option value="Ristorazione">Ristorazione & Food</option>
        </select>

        <!-- Barra di Ricerca -->
        <div class="search-container">
            <i class="bi bi-search search-icon"></i>
            <input type="text" id="searchInput" class="search-input" placeholder="Cerca per nome o settore..." onkeyup="applyFilters()">
        </div>
    </div>

    <div class="affiliazioni-grid" id="aziendeGrid">
        
        <!-- Azienda 1 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="TechCorp Solutions" data-sector="Informatica">
            <div class="azienda-logo-container">
                <i class="bi bi-buildings-fill azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">TechCorp Solutions</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>
            
            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#e0f2fe; color:#0369a1; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Informatica & Servizi</span>
                    <br>
                    Leader nel settore IT, TechCorp utilizza ModuLink per gestire i team di sviluppo distribuiti e ottimizzare i flussi di lavoro agili.
                </div>
            </div>
        </div>

        <!-- Azienda 2 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="Logistica Veloce S.r.l." data-sector="Logistica">
            <div class="azienda-logo-container">
                <i class="bi bi-box-seam-fill azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">Logistica Veloce S.r.l.</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#fef3c7; color:#b45309; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Logistica & Trasporti</span>
                    <br>
                    Azienda di trasporti internazionali che sfrutta il modulo GDM per il tracciamento in tempo reale delle merci.
                </div>
            </div>
        </div>

        <!-- Azienda 3 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="Fashion & Style" data-sector="Moda">
            <div class="azienda-logo-container">
                <i class="bi bi-shop-window azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">Fashion & Style</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#fce7f3; color:#be185d; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Retail & Moda</span>
                    <br>
                    Catena di retail moda che coordina 50 punti vendita grazie alla gestione centralizzata dei ruoli del personale.
                </div>
            </div>
        </div>

        <!-- Azienda 4 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="EcoEnergy S.p.A." data-sector="Energia">
            <div class="azienda-logo-container">
                <i class="bi bi-lightning-charge-fill azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">EcoEnergy S.p.A.</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#dcfce7; color:#15803d; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Energia Rinnovabile</span>
                    <br>
                    Fornitore di energia verde che utilizza i moduli amministrativi per gestire la fatturazione e il supporto clienti.
                </div>
            </div>
        </div>

        <!-- Azienda 5 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="AgriBio World" data-sector="Agricoltura">
            <div class="azienda-logo-container">
                <i class="bi bi-flower1 azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">AgriBio World</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#d9f99d; color:#365314; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Agricoltura & Bio</span>
                    <br>
                    Consorzio agricolo che utilizza i sensori IoT integrati con ModuLink per monitorare le coltivazioni certificata BIO.
                </div>
            </div>
        </div>

        <!-- Azienda 6 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="QuickEat Chain" data-sector="Ristorazione">
            <div class="azienda-logo-container">
                <i class="bi bi-cup-hot-fill azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">QuickEat Chain</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#fee2e2; color:#991b1b; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Ristorazione</span>
                    <br>
                    Franchising di ristorazione veloce che ottimizza i turni settimanali tramite il modulo Calendario centralizzato.
                </div>
            </div>
        </div>

        <!-- Azienda 7 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="CodeWave Labs" data-sector="Informatica">
            <div class="azienda-logo-container">
                <i class="bi bi-code-slash azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">CodeWave Labs</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#e0f2fe; color:#0369a1; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Informatica & Servizi</span>
                    <br>
                    Software house specializzata in intelligenza artificiale. Utilizza ModuLink per gestire la documentazione tecnica e la collaborazione tra i reparti R&D.
                </div>
            </div>
        </div>

        <!-- Azienda 8 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="Global Freight" data-sector="Logistica">
            <div class="azienda-logo-container">
                <i class="bi bi-truck azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">Global Freight</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#fef3c7; color:#b45309; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Logistica & Trasporti</span>
                    <br>
                    Leader nelle spedizioni via mare. Integra i dati dei container con il modulo GDM per una visibilità totale della supply chain globale.
                </div>
            </div>
        </div>

        <!-- Azienda 9 -->
        <div class="azienda-card" onclick="toggleCard(this)" data-name="Urban Trend" data-sector="Moda">
            <div class="azienda-logo-container">
                <i class="bi bi-handbag azienda-logo-icon"></i>
            </div>
            <div class="azienda-name">Urban Trend</div>
            <div class="click-hint"><i class="bi bi-hand-index-thumb"></i> Confronta</div>

            <div class="azienda-description-wrapper">
                <div class="azienda-description">
                    <span class="badge" style="background:#fce7f3; color:#be185d; padding:4px 8px; border-radius:6px; font-size:0.8rem; font-weight:600; margin-bottom:10px; display:inline-block;">Retail & Moda</span>
                    <br>
                    Brand di streetwear sostenibile. Gestisce la rete di fornitori e i lanci "drop" tramite i moduli di gestione attività e calendario di ModuLink.
                </div>
            </div>
        </div>

        <!-- Messaggio Nessun Risultato -->
        <div class="no-results" id="noResultsMsg">
            <i class="bi bi-search"></i> Nessuna azienda corrisponde ai criteri di ricerca.
        </div>

    </div>
</div>

<footer th:replace="~{fragments/footer :: mainFooter}"></footer>

<script>
    function toggleCard(element) {
        // Toggle classe active
        const isActive = element.classList.toggle('active');
        
        if (isActive) {
            // Se la card viene aperta, scorri automaticamente verso di essa
            // Un piccolo timeout permette al browser di ricalcolare il layout (order change)
            setTimeout(() => {
                element.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' // Si allinea in alto (rispettando scroll-margin-top)
                });
            }, 50);
        }
    }

    function applyFilters() {
        const searchInput = document.getElementById('searchInput').value.toUpperCase();
        const sectorSelect = document.getElementById('sectorSelect').value;
        const grid = document.getElementById('aziendeGrid');
        const cards = grid.getElementsByClassName('azienda-card');
        const noResults = document.getElementById('noResultsMsg');
        let visibleCount = 0;

        if (searchInput.length === 0) {
            for (let i = 0; i < cards.length; i++) {
                cards[i].classList.remove('active');
            }
        }

        for (let i = 0; i < cards.length; i++) {
            const card = cards[i];
            const name = card.getAttribute('data-name').toUpperCase();
            const sector = card.getAttribute('data-sector');
            const sectorText = card.innerText.toUpperCase(); 

            const matchesSelect = (sectorSelect === "") || (sector === sectorSelect);
            const matchesSearch = (name.indexOf(searchInput) > -1) || (sectorText.indexOf(searchInput) > -1);

            if (matchesSelect && matchesSearch) {
                card.style.display = ""; 
                visibleCount++;
                if (searchInput.length > 0) {
                    if (!card.classList.contains('active')) card.classList.add('active');
                }
            } else {
                card.style.display = "none"; 
            }
        }

        noResults.style.display = (visibleCount === 0) ? "block" : "none";
    }
</script>

</body>
</html>
